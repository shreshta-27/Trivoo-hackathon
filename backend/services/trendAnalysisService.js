export const analyzeTrends = (project, speciesData) => {    const trends = {        healthSlope: 0,        maintenanceGap: 0,        riskFactors: []    };    if (project.healthHistory && project.healthHistory.length >= 2) {        const sorted = project.healthHistory.sort((a, b) => b.recordedAt - a.recordedAt);        const latest = sorted[0];        const prev = sorted[Math.min(sorted.length - 1, 4)]; 
        if (latest && prev) {            trends.healthSlope = latest.score - prev.score; 
        }    }    const lastCare = project.careHistory && project.careHistory.length > 0        ? project.careHistory[project.careHistory.length - 1].performedAt        : project.createdAt;    const diffTime = Math.abs(new Date() - new Date(lastCare));    trends.maintenanceGap = Math.ceil(diffTime / (1000 * 60 * 60 * 24));    let riskThreshold = 30;    if (speciesData.maintenance === 'High') riskThreshold = 7;    if (speciesData.maintenance === 'Medium') riskThreshold = 14;    if (trends.maintenanceGap > riskThreshold) {        trends.riskFactors.push(`Maintenance delayed by ${trends.maintenanceGap} days (Threshold: ${riskThreshold})`);    }    if (trends.healthSlope < 0) {        trends.riskFactors.push(`Health score declining (${trends.healthSlope} pts recently)`);    }    const month = new Date().getMonth();    if (month >= 4 && month <= 6 && speciesData.water_need === 'High') {        trends.riskFactors.push('Approaching peak summer for high-water species');    }    return trends;};